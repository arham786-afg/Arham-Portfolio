---
import MainLayout from "../layouts/MainLayout.astro";
---

<MainLayout title="RESTRICTED SYSTEM ACCESS">

<section class="access">

  <!-- Background -->
  <div class="bg keyboard"></div>
  <div class="bg noise"></div>

  <!-- Header -->
  <header class="header">
    <h1>RESTRICTED OPERATIONAL SURFACE</h1>
    <p>
      Active systems detected.  
      Live commands executing under analyst control.
    </p>
  </header>

  <div class="systems">

    <!-- AI SOC ENGINE -->
    <a href="/ai-soc-engine" class="system critical">
      <div class="terminal" data-commands='[
        "correlate-process-tree",
        "reconstruct-timeline",
        "calculate-confidence",
        "recommend-escalation"
      ]'></div>

      <div class="meta">
        <span class="status">LIVE</span>
        <span class="severity">CRITICAL</span>
      </div>

      <h2>AI-Assisted SOC Investigation Engine</h2>
      <p>Live investigation logic executing during active incidents.</p>
      <div class="action">ENTER INVESTIGATION SURFACE →</div>
    </a>

    <!-- BLUESENTINEL -->
    <a href="/bluesentinel" class="system high">
      <div class="terminal" data-commands='[
        "match-detection-rule",
        "apply-enrichment",
        "queue-automation",
        "execute-response"
      ]'></div>

      <div class="meta">
        <span class="status">ACTIVE</span>
        <span class="severity">HIGH</span>
      </div>

      <h2>BlueSentinel — Detection & Automation</h2>
      <p>Detection and response pipelines operating on live telemetry.</p>
      <div class="action">ACCESS DETECTION SYSTEMS →</div>
    </a>

    <!-- ABOUT -->
    <a href="/about" class="system neutral">
      <div class="terminal" data-commands='[
        "verify-operator-identity",
        "load-operational-context",
        "review-decision-history"
      ]'></div>

      <div class="meta">
        <span class="status">RESTRICTED</span>
        <span class="severity">INFO</span>
      </div>

      <h2>Operator Context</h2>
      <p>Background, mindset, and system design philosophy.</p>
      <div class="action">VIEW OPERATOR PROFILE →</div>
    </a>

  </div>

  <div class="footer">
    SESSION ACTIVE • INCIDENT UNRESOLVED • MANUAL OVERRIDE ENABLED
  </div>

</section>

<script>
function startTyping(el) {
  const commands = JSON.parse(el.dataset.commands);
  let cmdIndex = 0;
  let charIndex = 0;
  let text = "";
  const prompt = "PS C:\\IR\\Live> ";

  function type() {
    if (charIndex < commands[cmdIndex].length) {
      text += commands[cmdIndex][charIndex++];
      el.innerHTML = `<span class="prompt">${prompt}</span>${text}<span class="cursor">_</span>`;
    } else {
      setTimeout(() => {
        charIndex = 0;
        text = "";
        cmdIndex = (cmdIndex + 1) % commands.length;
      }, 1200);
    }
  }

  setInterval(type, 90);
}

document.querySelectorAll(".terminal").forEach(startTyping);
</script>

<style>
/* Layout */
.access {
  position: relative;
  min-height: 100vh;
  padding: 3rem 0;
  overflow: hidden;
}

/* Background */
.bg {
  position: absolute;
  inset: -10%;
  pointer-events: none;
}

.keyboard {
  background: url("/images/keyboard.jpg") center/cover no-repeat;
  opacity: 0.22;
  filter: blur(1.5px);
  animation: drift 180s linear infinite;
}

.noise {
  background: repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,0.03),
    rgba(255,255,255,0.03) 1px,
    transparent 1px,
    transparent 3px
  );
  opacity: 0.2;
}

@keyframes drift {
  to { transform: translate(-30px, -25px); }
}

/* Header */
.header {
  position: relative;
  z-index: 3;
}

.header h1 {
  font-size: 1.7rem;
  letter-spacing: 0.1em;
}

/* Systems */
.systems {
  position: relative;
  z-index: 3;
  margin-top: 3rem;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 2.5rem;
}

.system {
  background: rgba(2,6,23,0.92);
  border: 1px solid #1f2937;
  padding: 2.2rem;
  text-decoration: none;
  position: relative;
  overflow: hidden;
}

/* Terminal */
.terminal {
  font-family: Consolas, monospace;
  font-size: 0.75rem;
  margin-bottom: 1rem;
  opacity: 0.9;
  min-height: 3.2rem;
}

.prompt {
  opacity: 0.7;
}

.cursor {
  animation: blink 1s steps(1) infinite;
}

@keyframes blink {
  50% { opacity: 0; }
}

/* Meta */
.meta {
  font-size: 0.65rem;
  letter-spacing: 0.1em;
  margin-bottom: 0.6rem;
}

.action {
  font-family: Consolas, monospace;
  font-size: 0.75rem;
  letter-spacing: 0.1em;
}

/* Threat colors */
.critical { border-left: 4px solid #ef4444; }
.critical .terminal, .critical .action { color: #ef4444; }

.high { border-left: 4px solid #f59e0b; }
.high .terminal, .high .action { color: #f59e0b; }

.neutral { border-left: 4px solid #9ca3af; }
.neutral .terminal, .neutral .action { color: #9ca3af; }

/* Footer */
.footer {
  position: absolute;
  bottom: 1.2rem;
  width: 100%;
  text-align: center;
  font-size: 0.65rem;
  letter-spacing: 0.18em;
  color: #9ca3af;
}
</style>

</MainLayout>
